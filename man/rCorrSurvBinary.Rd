% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rCorrSurvBinary.R
\name{rCorrSurvBinary}
\alias{rCorrSurvBinary}
\title{Generate Correlated Time-to-Event and Binary Outcomes}
\usage{
rCorrSurvBinary(
  nsim,
  outcomes,
  n,
  mst.OS = NULL,
  mst.PFS = NULL,
  p.OR = NULL,
  rho.OS.PFS = 0,
  rho.OS.OR = 0,
  rho.PFS.OR = 0,
  tau = 12,
  seed = NULL,
  validate.bounds = TRUE,
  prioritize = "OS"
)
}
\arguments{
\item{nsim}{A numeric value representing number of iterations}

\item{outcomes}{A character vector including 'OS', 'PFS' and/or 'OR'}

\item{n}{A numeric value representing sample size per iteration}

\item{mst.OS}{A numeric value representing median survival time of OS in years}

\item{mst.PFS}{A numeric value representing median survival time of PFS in years}

\item{p.OR}{A numeric value representing probability of OR (0 <= p.OR <= 1)}

\item{rho.OS.PFS}{A numeric value representing correlation between OS and PFS
(must be within Fréchet-Hoeffding bounds, default: 0)}

\item{rho.OS.OR}{A numeric value representing correlation between OS and OR
(must be within Fréchet-Hoeffding bounds, default: 0)}

\item{rho.PFS.OR}{A numeric value representing correlation between PFS and OR
(must be within Fréchet-Hoeffding bounds, default: 0)}

\item{tau}{A numeric value representing patients' accrual period in years
(patients will be enrolled within [0, tau], default: 12)}

\item{seed}{A numeric value representing seed number for reproducing results}

\item{validate.bounds}{Logical, whether to validate correlation bounds against
Fréchet-Hoeffding bounds before simulation (default: TRUE)}

\item{prioritize}{Character string specifying which distribution to preserve
when applying OS >= PFS constraint. Options are "OS" (default) or "PFS".
Only applies when both OS and PFS are included in outcomes.}
}
\value{
A tibble containing simulation results with columns:
  \item{sim}{Simulation iteration number (1 to nsim)}
  \item{patientID}{Patient identifier within each iteration (1 to n)}
  \item{OS}{Overall survival time in years (if 'OS' in outcomes)}
  \item{PFS}{Progression-free survival time in years (if 'PFS' in outcomes)}
  \item{OR}{Objective response indicator 0/1 (if 'OR' in outcomes)}
  \item{Accrual}{Patient accrual time in years}
}
\description{
This function generates pseudo random numbers of correlated time-to-event
and binary outcomes including overall survival (OS), progression-free
survival (PFS), and objective response (OR). The function uses a normal
copula to model correlation structures while maintaining specified marginal
distributions.
}
\details{
The function implements the following assumptions:
\itemize{
  \item Marginal distribution of OS follows exponential distribution
  \item Marginal distribution of PFS follows exponential distribution
  \item Marginal distribution of OR follows Bernoulli distribution
  \item OS >= PFS constraint is enforced when both outcomes are included
  \item Patient accrual follows uniform distribution over [0, tau]
  \item Correlation structure is modeled using normal copula
}

When both OS and PFS are included, the constraint OS >= PFS is enforced.
The prioritize parameter determines which distribution is preserved:
\itemize{
  \item prioritize = "OS": PFS is adjusted to ensure PFS <= OS (OS distribution preserved)
  \item prioritize = "PFS": OS is adjusted to ensure OS >= PFS (PFS distribution preserved)
}
}
\examples{
# Generate correlated OS, PFS, and OR
result <- rCorrSurvBinary(
  nsim = 100,
  outcomes = c('OS', 'PFS', 'OR'),
  n = 200,
  mst.OS = 12,
  mst.PFS = 6,
  p.OR = 0.4,
  rho.OS.PFS = 0.5,
  rho.OS.OR = 0.3,
  rho.PFS.OR = 0.4,
  tau = 24,
  seed = 123,
  prioritize = "OS"
)

# Generate only OS and PFS with correlation, preserving PFS distribution
result2 <- rCorrSurvBinary(
  nsim = 100,
  outcomes = c('OS', 'PFS'),
  n = 100,
  mst.OS = 15,
  mst.PFS = 8,
  rho.OS.PFS = 0.7,
  tau = 18,
  seed = 456,
  prioritize = "PFS"
)

}
